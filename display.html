
<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <title>æŠ½å¥–å±•ç¤º</title>
  <style>
    body {
      margin: 0;
      background: black;
      color: white;
      font-family: 'Segoe UI', 'PingFang SC', sans-serif;
      overflow: hidden;
    }
    .main {
      text-align: center;
      padding-top: 6vh;
    }
    h1 {
      font-size: 3.5em;
      text-shadow: 0 0 20px gold;
      color: gold;
    }
    .info {
      margin-top: 4vh;
      font-size: 2.2em;
      text-shadow: 0 0 8px white;
    }
    .prize-img {
      margin-top: 40px;
      height: 180px;
    }
    .meta {
      margin-top: 16px;
      font-size: 1.4em;
      color: #f5f5f5;
      text-shadow: 0 0 10px #999;
    }
  </style>
</head>
<body>
  <div class="main">
    <h1 id="prize">ğŸ å½“å‰å¥–å“</h1>
    <div class="info" id="winner">ç­‰å¾…æŠ½å¥–...</div>
    <img id="prizeImg" class="prize-img" />
    <div class="meta" id="prizeMeta"></div>
  </div>

  <script>
    const flags = {
      "ä¸­å›½": "ğŸ‡¨ğŸ‡³", "å°åº¦": "ğŸ‡®ğŸ‡³", "æ³°å›½": "ğŸ‡¹ğŸ‡­", "é©¬æ¥è¥¿äºš": "ğŸ‡²ğŸ‡¾",
      "å­ŸåŠ æ‹‰å›½": "ğŸ‡§ğŸ‡©", "å·´åŸºæ–¯å¦": "ğŸ‡µğŸ‡°", "å°åº¦å°¼è¥¿äºš": "ğŸ‡®ğŸ‡©", "é˜¿è”é…‹": "ğŸ‡¦ğŸ‡ª",
      "ä¿„ç½—æ–¯": "ğŸ‡·ğŸ‡º", "è€æŒ": "ğŸ‡±ğŸ‡¦", "å¦æ¡‘å°¼äºš": "ğŸ‡¹ğŸ‡¿", "é˜¿å°”åŠåˆ©äºš": "ğŸ‡©ğŸ‡¿",
      "å‡ å†…äºš": "ğŸ‡¬ğŸ‡³", "å¤å·´": "ğŸ‡¨ğŸ‡º", "å·´è¥¿": "ğŸ‡§ğŸ‡·", "è‹ä¸¹": "ğŸ‡¸ğŸ‡©",
      "å“ˆè¨å…‹æ–¯å¦": "ğŸ‡°ğŸ‡¿", "ä¹Œå…¹åˆ«å…‹æ–¯å¦": "ğŸ‡ºğŸ‡¿", "å¸Œè…Š": "ğŸ‡¬ğŸ‡·", "è¶Šå—": "ğŸ‡»ğŸ‡³",
      "ç¾å›½": "ğŸ‡ºğŸ‡¸", "è‹±å›½": "ğŸ‡¬ğŸ‡§", "æ—¥æœ¬": "ğŸ‡¯ğŸ‡µ", "å¾·å›½": "ğŸ‡©ğŸ‡ª", "æ³•å›½": "ğŸ‡«ğŸ‡·"
    };

    function matchFlag(nation) {
      const lower = nation.toLowerCase();
      for (const key in flags) {
        if (lower.includes(key.toLowerCase())) {
          return flags[key] + " " + nation;
        }
      }
      return nation;
    }

    const channel = new BroadcastChannel("draw-channel");
    channel.onmessage = (e) => {
      const data = e.data;
      document.getElementById("prize").textContent = `ğŸ ${data.prize || 'å½“å‰å¥–å“'}`;
      const parts = (data.text || "").split("ï½œ");
      if (parts.length >= 3) {
        const flagNation = matchFlag(parts[2]);
        document.getElementById("winner").textContent = `ğŸ¯ ${parts[0]}ï½œ${parts[1]}ï½œ${flagNation}`;
      } else {
        document.getElementById("winner").textContent = data.text || "";
      }

      const img = document.getElementById("prizeImg");
      img.src = data.img || "";
      img.style.display = data.img ? "block" : "none";

      document.getElementById("prizeMeta").textContent =
        `ğŸ’° ${data.price || ''}   ğŸ æ•°é‡ï¼š${data.qty || ''}`;
    };
  </script>
</body>
</html>
